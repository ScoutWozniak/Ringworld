@using Sandbox;
@using System;
@using System.Linq;
@using System.Threading.Tasks;
@using Sandbox.Menu;
@using Sandbox.UI;

@namespace Ringworld

<style>
    checkbox {
        width: 100%;
        flex-direction: row;
        margin-bottom: 10px;
        cursor: pointer;
        &.checked {
        color: white;
    }
    }

    convartoggle {
        width: 100%;
        height: 50px;
    }

</style>

<root>
    <label class="game-title">
        @Sandbox.Game.Menu.Package.Title
    </label>

    @if ( Lobby == null ) 
    {
        <div class="controls">
            <a class="button">Loading...</a>

            <a class="button" href="/lobby/list">Return</a>
        </div>
    }
    else
    {

        <div class="controls">
            <div class="col">
                <label>Members (@Lobby.MemberCount/@Lobby.MaxMembers)</label>

                <div class="span">
                    @foreach (var member in Lobby.Members)
                    {
                        <img class="avatar" src="avatar:@member.Id" tooltip="@member.Name" />
                    }
                </div>
            </div>

           @if ( Lobby.Owner.IsMe )
            {
                <div class="span">
                    @if ( MaxPlayersSupported > 1 )
                    {
                        <FormGroup class="form-group">
                            <Label>Maximum Players</Label>
                            <Control>
                                <SliderControl ShowRange=@true Min=@(1f) Max=@MaxPlayersSupported Value:bind=@Game.Menu.Lobby.MaxMembers />
                            </Control>
                        </FormGroup>
                    }

                    <FormGroup class="form-group">
                        <Label>Map</Label>
                        <Control>
                            <SlimPackageCard OnLaunch=@OnMapClicked Package=@MapPackage />
                        </Control>
                    </FormGroup>

                    <FormGroup class="form-group">
                        <Label>Team Game</Label>
                        <Control>
                            <button onclick=@buttonClicked>@IsTeamGame</button>
                        </Control>
                    </FormGroup>

                    <FormGroup class="form-group">
                            <Label>Max Frags</Label>
                            <Control>
                                <SliderControl ShowRange=@true Min=@(1f) Max=@(50f) Value:bind=@maxFrags/>
                            </Control>
                        </FormGroup>
                </div>


            }

           <div class="spacer"/>

            <a class="button" @onclick=@LeaveLobby>Leave Lobby</a>

            <a class="button" @onclick=@StartGame>Start</a>

            <a class="button" href="/lobby/list">Return</a>
        </div>
    }
</root>

@code
{
    
}